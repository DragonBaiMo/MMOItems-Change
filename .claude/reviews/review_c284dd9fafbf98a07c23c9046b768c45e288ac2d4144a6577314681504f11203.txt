# 变更摘要：修复玩家离线时的 NPT/逻辑错误，重构修复命令提示语，并允许宝石拥有死亡降级概率。

## 业务逻辑变更已确认为无缺陷实现
代码本身实现正确，无 bug。以下是受影响的行为变化（业务决策的结果，不需修复）：

- 文件：`MMOItems-API/.../RepairCommandTreeNode.java`，L44, L51, L66
  变更：将“You are not holding any item”等硬编码提示统一替换为 `Message.REPAIR_CMD_NOT_REPAIRABLE`（显示为 "The item you are holding can't be repaired."）。
  注意点：空手时也会提示“无法修复该物品”，提示语不如之前具体，但属于文本规范化决策。

- 文件：`MMOItems-API/.../ItemStats.java`，L241
  变更：`DOWNGRADE_ON_DEATH_CHANCE` 统计属性现在的适用类型增加了 `gem_stone`。
  注意点：这意味着宝石类物品现在也可以配置死亡降级概率（需确认相关逻辑是否支持处理非装备类物品，代码层面无崩溃风险）。

- 文件：`MMOItems-Dist/.../PlayerListener.java`，L286
  变更：在执行延迟死亡降级前增加 `!playerData.isOnline()` 检查。
  注意点：这是防御性修复，防止对离线玩家操作导致潜在错误。

审查通过。